{% extends 'base/common/base.html' %}
{% block title %}{{page_title}}{% endblock %}
{% block content %}
<section class="bg-slate-950" id="{{content.section_a_text_1|slugify}}">
    <div class="relative isolate px-6 {% if user.is_authenticated %}{% else %}pt-14{% endif %} lg:px-8">
        <div class="absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80" aria-hidden="true">
            <div class="animate__animated animate__zoomIn animate__slower">
                <div class="relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#943561] to-[#9089fc] opacity-30 sm:left-[calc(20%-30rem)] sm:w-[72.1875rem]" style="clip-path: polygon(69.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"></div>
            </div>
        </div>
        <div class="mx-auto max-w-3xl py-36 sm:py-48 lg:py-48">
            <div class="animate__animated animate__fadeIn animate__slower 6s">
                <div class="text-center animate__animated animate__pulse animate__slower 5s">
                    <h1 class="bg-gradient-to-r from-green-300 via-blue-500 to-indigo-600 bg-clip-text text-4xl font-bold tracking-tight text-gray-900 text-transparent sm:text-6xl">Get started</h1>
                </div>
            </div>
            <div class="text-center animate__animated animate__fadeIn animate__delay-3s">
                <p class="mt-6 text-lg leading-8 text-gray-300">Prepare your site content for the first time and get started with <strong>Tail</strong><span class="bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent"><strong>Node</strong></span> site</p> 
            </div>
            <div class="mt-20 flex items-center justify-center gap-x-6 animate__animated animate__fadeIn animate__faster animate__delay-4s">
                <div class="animate__animated animate__fadeInUp animate__delay-5s">
                    <div class="">
                        <form id="initializeContentForm" method="post" action="{% url 'initialize-tailnode-site-data' unique_id %}">
                            {% csrf_token %}
                            <input type="hidden" name="uuid" value="{{ unique_id }}">
                            <button id="submitButton" class="inline-flex w-full rounded-lg border border-blue-600 px-12 py-3 text-sm font-medium text-white hover:bg-blue-600/50 focus:outline-none focus:ring active:bg-blue-500 sm:w-auto mt-4">
                                <span id="spinner" class="hidden animate-spin">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" class="size-5 fill-sky-600 motion-safe:animate-spin dark:fill-sky-600">
                                        <path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25" />
                                        <path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" />
                                    </svg>
                                </span>&nbsp;
                                <span id="buttonText">Initialize content</span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="absolute inset-x-0 top-[calc(100%-13rem)] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[calc(100%-30rem)]" aria-hidden="true">
            <div class="animate__animated animate__zoomIn animate__slower">
                <div class="relative left-[calc(50%+3rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 bg-gradient-to-tr from-[#7264ef] to-[#9089fc] opacity-30 sm:left-[calc(50%+36rem)] sm:w-[72.1875rem]" style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"></div>
            </div>
        </div>
    </div>
</section>
<script>
    document.querySelector('#submitButton').addEventListener('click', function(event) {
        event.preventDefault();

        var button = this;
        var buttonText = button.querySelector('#buttonText');
        var spinner = button.querySelector('#spinner');

        buttonText.innerText = 'Initializing content... ';

        spinner.classList.remove('hidden');

        button.disabled = true;

        var form = button.closest('form');

        form.submit();
    });
</script>
{% endblock %}
